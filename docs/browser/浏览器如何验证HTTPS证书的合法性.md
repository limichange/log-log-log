# 浏览器如何验证 HTTPS 证书的合法性

## 大致过程：

浏览器从服务器拿到证书。
证书上有服务器的公钥和 CA 机构打上的数字签名。
拿到证书后验证其数字签名。
具体就是，根据证书上写的 CA 签发机构，在浏览器内置的根证书里找到对应的公钥，用此公钥解开数字签名，得到摘要（digest,证书内容的 hash 值），据此验证证书的合法性。

## 多说两句 https 接下来的加密过程：

验证完合法性后，在证书里取出服务器的公钥。
浏览器生成对称密钥。
使用服务器公钥对该对称密钥加密，发回给服务器。
服务器使用私钥解密，得到对称密钥。
服务器使用该对称密钥加密后续 http 数据。
使用对称密钥加密是因为比非对称加密高效。

## links

- [zhihu](https://www.zhihu.com/question/37370216)
