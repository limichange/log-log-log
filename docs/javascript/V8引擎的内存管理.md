# V8 引擎的内存管理

## 内存分配

运行 js 代码的时候从内容空间上分为堆空间和栈空间，这里栈空间就是创建执行上下文的调用栈。

```js
function foo() {
    let a = 1;
    let b = 'test';
    let c = {
        num: 3;
    }
    let d = c
}
foo()
```

当执行这段函数时，先编译，创建执行上下文，然后逐行执行赋值代码，基本数据类型的数据就存放在在了调用栈中

然后执行到引用数据类型的赋值时，将该对象分配到堆空间中，分配后会有一个对应的内存地址，将这个内存地址赋值给变量，并存到栈空间中，这样就完成了基本数据类型和引用数据类型的存储

## V8 的垃圾回收

堆中垃圾数据是通过 javaScript 引擎垃圾回收器来回收,V8 把堆分成了新生代和老生代两个区域，新生代存放生存时间短的对象，老生代存放生存时间长的对象

## links

- [V8 引擎的内存管理](https://juejin.im/post/5e4bd6eaf265da573d619e9a#heading-4)
